(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),a=t(3),o=t(2),i=t(4),u=t.n(i),d="/api/persons",s=function(){return u.a.get(d).then((function(e){return e.data}))},l=function(e){return u.a.post(d,e).then((function(e){return e.data}))},b=function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},j=function(e,n){return u.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},h=t(0),f=function(e){var n=e.message,t={color:e.color,visibility:n?"initial":"hidden",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10,display:"block"};return Object(h.jsx)("div",{style:t,children:n})},m=function(e){var n=e.persons,t=e.deletePerson;return Object(h.jsx)("div",{children:n.map((function(e){return Object(h.jsxs)("p",{children:[e.name," ",e.number,Object(h.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))})},O=function(e){var n=e.filter,t=e.handleFilterChange;return Object(h.jsxs)("div",{children:["filter: ",Object(h.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,r=e.handleNameChange,a=e.handleNumberChange;return Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:t,onChange:r})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:c,onChange:a})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},v=function(){var e=Object(o.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1];Object(o.useEffect)((function(){s().then((function(e){c(e)}))}),[]);var r=Object(o.useState)(""),i=Object(a.a)(r,2),u=i[0],d=i[1],v=Object(o.useState)(""),g=Object(a.a)(v,2),x=g[0],w=g[1],C=Object(o.useState)(""),y=Object(a.a)(C,2),N=y[0],S=y[1],k=Object(o.useState)(""),P=Object(a.a)(k,2),T=P[0],D=P[1],B=Object(o.useState)("green"),E=Object(a.a)(B,2),F=E[0],J=E[1],L=function(e,n){e.number=n,j(e.id,e).then((function(n){D("Updated number for ".concat(u)),J("green"),setTimeout((function(){D(null)}),5e3),c(t.map((function(t){return t.id!==e.id?t:n}))),d(""),w("")})).catch((function(n){R(e.name)}))},R=function(e){D("".concat(e," was already removed from the server!")),J("red"),setTimeout((function(){D(null)}),5e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(f,{message:T,color:F}),Object(h.jsx)(O,{value:N,handleFilterChange:function(e){S(e.target.value)}}),Object(h.jsx)("h2",{children:"Add new"}),Object(h.jsx)(p,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===u}));n?window.confirm("".concat(u," is already added to phonebook. Replace the old phone number with a new one?"))&&L(n,x):l({name:u,number:x}).then((function(e){D("Created entry for ".concat(u)),J("green"),setTimeout((function(){D(null)}),5e3),c(t.concat(e)),d(""),w("")}))},newName:u,newNumber:x,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(m,{persons:t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})),deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&b(e.id).then((function(n){var r=t.filter((function(n){return n.id!==e.id}));c(r),J("green"),D("Deleted ".concat(e.name)),setTimeout((function(){D(null)}),5e3)})).catch((function(n){R(e.name)}))}})]})};r.a.render(Object(h.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a1ebbe12.chunk.js.map